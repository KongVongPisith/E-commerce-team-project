{
    "sourceFile": "src/components/Shop/CreateEvent.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1705397830999,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1705397830999,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\nimport { AiOutlinePlusCircle } from \"react-icons/ai\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { createevent } from \"../../redux/actions/event\";\nimport { categoriesData } from \"../../static/data\";\n\nconst CreateEvent = () => {\n  const { seller } = useSelector((state) => state.seller);\n  const { success, error } = useSelector((state) => state.events);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  const [images, setImages] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [tags, setTags] = useState(\"\");\n  const [originalPrice, setOriginalPrice] = useState();\n  const [discountPrice, setDiscountPrice] = useState();\n  const [stock, setStock] = useState();\n const [startDate,setStartDate] = useState(null);\n const [endDate,setEndDate] = useState(null);\n\n const handleStartDateChange = (e) => {\n    const startDate = new Date(e.target.value);\n    const minEndDate = new Date(startDate.getTime() + 3 * 24 * 60 * 60 * 1000);\n    setStartDate(startDate);\n    setEndDate(null);\n    document.getElementById(\"end-date\").min = minEndDate.toISOString.slice(0,10);\n }\n\n const handleEndDateChange = (e) => {\n    const endDate = new Date(e.target.value);\n     setEndDate(endDate);\n };\n   \n const today = new Date().toISOString().slice(0,10);\n\n const minEndDate = startDate ? new Date(startDate.getTime() + 3 * 24 * 60 * 60 * 1000).toISOString().slice(0,10) : \"\";\n\n  useEffect(() => {\n    if (error) {\n      toast.error(error);\n    }\n    if (success) {\n      toast.success(\"Event created successfully!\");\n      navigate(\"/dashboard-events\");\n      window.location.reload();\n    }\n  }, [dispatch, error, success]);\n\n  const handleImageChange = (e) => {\n    e.preventDefault();\n\n    let files = Array.from(e.target.files);\n    setImages((prevImages) => [...prevImages, ...files]);\n  };\n\n\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const newForm = new FormData();\n\n    images.forEach((image) => {\n      newForm.append(\"images\", image);\n    });\n    newForm.append(\"name\", name);\n    newForm.append(\"description\", description);\n    newForm.append(\"category\", category);\n    newForm.append(\"tags\", tags);\n    newForm.append(\"originalPrice\", originalPrice);\n    newForm.append(\"discountPrice\", discountPrice);\n    newForm.append(\"stock\", stock);\n    newForm.append(\"shopId\", seller._id);\n    newForm.append(\"start_Date\", startDate.toISOString());\n    newForm.append(\"Finish_Date\", endDate.toISOString());\n    dispatch(createevent(newForm));\n  };\n\n  return (\n    <div className=\"w-[90%] 800px:w-[50%] bg-white  shadow h-[80vh] rounded-[4px] p-3 overflow-y-scroll\">\n      <h5 className=\"text-[30px] font-Poppins text-center\">Create Event</h5>\n      {/* create event form */}\n      <form onSubmit={handleSubmit}>\n        <br />\n        <div>\n          <label className=\"pb-2\">\n            Name <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            value={name}\n            className=\"mt-2 appearance-none block w-full px-3 h-[35px] border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n            onChange={(e) => setName(e.target.value)}\n            placeholder=\"Enter your event product name...\"\n          />\n        </div>\n        <br />\n        <div>\n          <label className=\"pb-2\">\n            Description <span className=\"text-red-500\">*</span>\n          </label>\n          <textarea\n            cols=\"30\"\n            required\n            rows=\"8\"\n            type=\"text\"\n            name=\"description\"\n            value={description}\n            className=\"mt-2 appearance-none block w-full pt-2 px-3 border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n            onChange={(e) => setDescription(e.target.value)}\n            placeholder=\"Enter your event product description...\"\n          ></textarea>\n        </div>\n        <br />\n        <div>\n          <label className=\"pb-2\">\n            Category <span className=\"text-red-500\">*</span>\n          </label>\n          <select\n            className=\"w-full mt-2 border h-[35px] rounded-[5px]\"\n            value={category}\n            onChange={(e) => setCategory(e.target.value)}\n          >\n            <option value=\"Choose a category\">Choose a category</option>\n            {categoriesData &&\n              categoriesData.map((i) => (\n                <option value={i.title} key={i.title}>\n                  {i.title}\n                </option>\n              ))}\n          </select>\n        </div>\n        <br />\n        <div>\n          <label className=\"pb-2\">Tags</label>\n          <input\n            type=\"text\"\n            name=\"tags\"\n            value={tags}\n            className=\"mt-2 appearance-none block w-full px-3 h-[35px] border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n            onChange={(e) => setTags(e.target.value)}\n            placeholder=\"Enter your event product tags...\"\n          />\n        </div>\n        <br />\n        <div>\n          <label className=\"pb-2\">Original Price</label>\n          <input\n            type=\"number\"\n            name=\"price\"\n            value={originalPrice}\n            className=\"mt-2 appearance-none block w-full px-3 h-[35px] border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n            onChange={(e) => setOriginalPrice(e.target.value)}\n            placeholder=\"Enter your event product price...\"\n          />\n        </div>\n        <br />\n        <div>\n          <label className=\"pb-2\">\n            Price (With Discount) <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"number\"\n            name=\"price\"\n            value={discountPrice}\n            className=\"mt-2 appearance-none block w-full px-3 h-[35px] border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n            onChange={(e) => setDiscountPrice(e.target.value)}\n            placeholder=\"Enter your event product price with discount...\"\n          />\n        </div>\n        <br />\n        <div>\n          <label className=\"pb-2\">\n            Product Stock <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"number\"\n            name=\"price\"\n            value={stock}\n            className=\"mt-2 appearance-none block w-full px-3 h-[35px] border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n            onChange={(e) => setStock(e.target.value)}\n            placeholder=\"Enter your event product stock...\"\n          />\n        </div>\n        <br />\n        <div>\n          <label className=\"pb-2\">\n            Event Start Date <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"date\"\n            name=\"price\"\n            id=\"start-date\"\n            value={startDate ? startDate.toISOString().slice(0,10) : \"\"}\n            className=\"mt-2 appearance-none block w-full px-3 h-[35px] border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n            onChange={handleStartDateChange}\n            min={today}\n            placeholder=\"Enter your event product stock...\"\n          />\n        </div>\n        <br />\n        <div>\n          <label className=\"pb-2\">\n            Event End Date <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"date\"\n            name=\"price\"\n            id=\"start-date\"\n            value={endDate ? endDate.toISOString().slice(0,10) : \"\"}\n            className=\"mt-2 appearance-none block w-full px-3 h-[35px] border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n            onChange={handleEndDateChange}\n            min={minEndDate}\n            placeholder=\"Enter your event product stock...\"\n          />\n        </div>\n        <br />\n        <div>\n          <label className=\"pb-2\">\n            Upload Images <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"file\"\n            name=\"\"\n            id=\"upload\"\n            className=\"hidden\"\n            multiple\n            onChange={handleImageChange}\n          />\n          <div className=\"w-full flex items-center flex-wrap\">\n            <label htmlFor=\"upload\">\n              <AiOutlinePlusCircle size={30} className=\"mt-3\" color=\"#555\" />\n            </label>\n            {images &&\n              images.map((i) => (\n                <img\n                  src={URL.createObjectURL(i)}\n                  key={i}\n                  alt=\"\"\n                  className=\"h-[120px] w-[120px] object-cover m-2\"\n                />\n              ))}\n          </div>\n          <br />\n          <div>\n            <input\n              type=\"submit\"\n              value=\"Create\"\n              className=\"mt-2 cursor-pointer appearance-none text-center block w-full px-3 h-[35px] border border-gray-300 rounded-[3px] placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n            />\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default CreateEvent;\n"
        }
    ]
}